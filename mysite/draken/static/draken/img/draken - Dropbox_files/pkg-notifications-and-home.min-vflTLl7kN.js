(function(){define("modules/clean/avatar/initials_avatar_with_color",["jquery","external/react","modules/clean/avatar/initials_avatar","modules/clean/avatar/style"],function(e,t,n,i){var o,a;return a=i.colorValueForAvatarName,o=t.createElement,t.createClass({displayName:"InitialsAvatarWithColorDerivedFromName",propTypes:{name:t.PropTypes.string.isRequired},render:function(){var t;return t=e.extend({color:a(this.props.name)},this.props),delete t.name,o(n,t)}})})}).call(this),define("modules/clean/loggers/notification_logger",["require","exports","modules/clean/ajax","modules/clean/react/user_notifications/models"],function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationLocations={TRAY:"home",HOME_PAGE:"home_page"};var o=(function(){function e(){}return e.logReceive=function(t){for(var n=[],i=0,o=t;i<o.length;i++){var a=o[i];n.push(e.getCommonEventData("receive",a))}e.log(n)},e.logRender=function(t,n,i){var o=[];t.forEach(function(t,a){var r=e.getCommonEventData("render",t);r.location=i,r.location_index=n+a,o.push(r)}),e.log(o)},e.logAction=function(t,n,i){var o=e.getCommonEventData("action",t);o.action_taken=n,i&&(o.location=i),e.log([o])},e.logMarkAsRead=function(t,n){for(var i=[],o=0,a=t;o<a.length;o++){var r=a[o],u=e.getCommonEventData("mark_read",r);u.location=n,i.push(u)}e.log(i)},e.log=function(e){0!==e.length&&n.SilentBackgroundRequest({url:"/log/notif_events",data:{event_list:JSON.stringify(e)}})},e.getCommonEventData=function(e,t){return{event_name:e,type_id:t.typeId,campaign_id:t.campaignId,campaign_version:t.campaignVersion,instance_id:parseInt(t.id,10),status:i.NotificationStatusStrings[t.status],seen_state:t.seenState,target_object_key:t.targetObjectKey}},e})();t.NotificationLogger=o}),define("modules/clean/react/user_notifications/api_helper",["require","exports","modules/clean/react/user_notifications/constants","modules/clean/react/user_notifications/models"],function(e,t,n,i){"use strict";function o(e){return new i.UserNotification({id:e.nid,userId:e.user_id,typeId:e.type_id,typeData:a(e),targetObjectKey:e.target_object_key,status:e.status,seenState:e.seen_state,feedTimeInSec:e.feed_time,rawDropdownRowHtml:e.notification_div,roleLabel:e.role_label,bluenoteActor:m(e),bluenoteObject:I(e),bluenoteNotificationTypeId:e.bluenote_notification_type_id,bluenoteTypedData:y(e)})}function a(e){switch(e.type_id){case i.NotificationTypes.SharedFolderInvite:return r(e);case i.NotificationTypes.Bluenote:return u(e)}}function r(e){return{overQuotaStatus:e.sf_invite_overquota}}function u(e){var t=e.bluenote_payload;if(null!=t)return{templateType:t.template_type,templateVersion:t.template_version,campaignInfo:p(t.campaign_info),displayMessage:t.home_params.message,icon:d(t.image),surfaceAction:_(t.home_params.surface_action),buttonActions:(t.home_params.button_actions||[]).map(_),preview:s(t.preview)}}function s(e){if(null!=e)return{showThumbnail:e.show_thumbnail||!1,quote:e.quote,tasks:c(e.tasks)}}function c(e){if(null!=e)return{taskEndpoint:e.task_endpoint,tasks:(e.tasks||[]).map(l)}}function l(e){if(null!=e)return{name:e.name,id:e.id,isComplete:e.is_complete}}function p(e){if(null!=e)return{campaignId:e.campaignId,categoryId:e.categoryId,versionId:e.versionId?""+e.versionId:void 0,contentId:e.contentId}}function d(e){if(null!=e)return"avatar"===e.type?{avatarInitials:e.avatar_initials,avatarUrl:e.avatar_url}:{lowResIconUrl:e.system_url32,highResIconUrl:e.system_url64}}function _(e){if(null!=e){var t=void 0;if("open_url"===e.action_name?t=i.BluenoteActionTypes.OpenUrl:"mount_shared_folder"===e.action_name?t=i.BluenoteActionTypes.MountSharedFolder:"approve_group_join_request"===e.action_name?t=i.BluenoteActionTypes.ApproveGroupJoinRequest:"remove_group_join_request"===e.action_name&&(t=i.BluenoteActionTypes.RemoveGroupJoinRequest),t)return{buttonLabel:e.label,actionType:t,params:f(t,e.params)}}}function f(e,t){if(null!=t){if(e===i.BluenoteActionTypes.OpenUrl)return{urlPath:t.url_path};if(e===i.BluenoteActionTypes.MountSharedFolder)return{nsId:t.ns_id};if(e===i.BluenoteActionTypes.ApproveGroupJoinRequest||e===i.BluenoteActionTypes.RemoveGroupJoinRequest)return{requestingUserId:t.requesting_user_id,groupId:t.group_id}}}function m(e){var t=e.bluenote_actor;if(null!=t)return{accountId:t.actor_account_id,avatarUrl:t.actor_avatar_url,displayName:t.actor_display_name,initials:t.actor_initials}}function I(e){var t=e.bluenote_object;if(null!=t)return{id:t.id,ignore:t.ignore,name:t.name,thumbnailUrl:t.thumbnail_url,type:t.type,url:t.url}}function y(e){var t=e.bluenote_notification_type_id,i=e.bluenote_typed_data;if(null!=t&&null!=i)switch(t){case n.BNNotificationTypeIdentifier.NONE:return;case n.BNNotificationTypeIdentifier.DROPBOX_FILE_COMMENT:return E(i);case n.BNNotificationTypeIdentifier.DROPBOX_SHARED_CONTENT:return T(i);case n.BNNotificationTypeIdentifier.PAPER_SHARE:return O(i);case n.BNNotificationTypeIdentifier.PAPER_COMMENT:return N(i);case n.BNNotificationTypeIdentifier.PAPER_MENTION:return g(i);default:return}}function E(e){return{commentText:e.comment_text}}function T(e){return{shareText:e.share_text}}function O(e){return{shareText:e.share_text}}function N(e){return{commentText:e.comment_text,numOtherCommenters:e.num_other_commenters,numOtherComments:e.num_other_comments}}function g(e){return{mentionText:e.mention_text}}function v(e){var t=e.notifications.map(o);return{cursor:e.latest_nid,notifications:t}}function b(e,t){return t.feedTime.getTime()-e.feedTime.getTime()||e.key.localeCompare(t.key)}Object.defineProperty(t,"__esModule",{value:!0}),t.userNotificationDeserializer=o,t.parseGetAllResponse=v,t.userNotificationComparator=b}),define("modules/clean/react/user_notifications/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes={LOAD_REQUEST:"USER_NOTIFICATIONS_LOAD_REQUEST",LOAD_SUCCESS:"USER_NOTIFICATIONS_LOAD_SUCCESS",LOAD_FAILURE:"USER_NOTIFICATIONS_LOAD_FAILURE",ACKNOWLEDGEMENT_REQUEST:"USER_NOTIFICATIONS_ACKNOWLEDGEMENT_REQUEST",ACKNOWLEDGEMENT_REQUEST_SINGLE:"USER_NOTIFICATIONS_ACKNOWLEDGEMENT_REQUEST_SINGLE",MARK_AS_SEEN_REQUEST:"USER_NOTIFICATIONS_MARK_AS_SEEN_REQUEST"},t.EventTypes={RENDERED_NOTIFICATIONS:"USER_NOTIFICATIONS_RENDERED_NOTIFICATIONS"},t.BellDesignTypes={BLUE_ICON:"BLUE_ICON",GRAY_ICON:"GRAY_ICON"},t.BNNotificationTypeIdentifier={NONE:"NONE",DROPBOX_FILE_COMMENT:"DROPBOX_FILE_COMMENT",DROPBOX_SHARED_CONTENT:"DROPBOX_SHARED_CONTENT",PAPER_SHARE:"PAPER_SHARE",PAPER_COMMENT:"PAPER_COMMENT",PAPER_MENTION:"PAPER_MENTION"},t.BluenoteObjectTypes={DROPBOX_FILE:"dropbox-file",DROPBOX_FOLDER:"dropbox-folder",PAPER_PAD:"paper-pad",PAPER_FOLDER:"paper-folder"}}),define("modules/clean/react/user_notifications/models",["require","exports","modules/clean/datetime"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e[e.OpenUrl=1]="OpenUrl",e[e.MountSharedFolder=2]="MountSharedFolder",e[e.ApproveGroupJoinRequest=3]="ApproveGroupJoinRequest",e[e.RemoveGroupJoinRequest=4]="RemoveGroupJoinRequest"})(t.BluenoteActionTypes||(t.BluenoteActionTypes={}));var i;(function(e){e[e.Unread=0]="Unread",e[e.Read=1]="Read",e[e.Invisible=2]="Invisible"})(i=t.NotificationStatuses||(t.NotificationStatuses={}));var o;(function(e){e[e.Unseen=1]="Unseen",e[e.Seen=2]="Seen"})(o=t.NotificationSeenState||(t.NotificationSeenState={})),t.NotificationStatusStrings={0:"unread",1:"read",2:"invisible"},t.SharedFolderInviteOverQuotaStatuses={ALREADY_OVER:"overquota",WILL_BE_OVER:"will_be_overquota"};var a;(function(e){e[e.SharedFolderInvite=100]="SharedFolderInvite",e[e.Bluenote=2200]="Bluenote"})(a=t.NotificationTypes||(t.NotificationTypes={}));var r=(function(){function e(e){var t=e.id,n=e.userId,i=e.typeId,o=e.typeData,a=e.targetObjectKey,r=e.status,u=e.seenState,s=e.feedTimeInSec,c=e.rawDropdownRowHtml,l=e.roleLabel,p=e.bluenoteActor,d=e.bluenoteObject,_=e.bluenoteNotificationTypeId,f=e.bluenoteTypedData;this.id=t,this.userId=n,this.typeId=i,this.typeData=o,this.targetObjectKey=a,this.status=r,this.seenState=u,this.feedTimeInSec=s,this.rawDropdownRowHtml=c,this.roleLabel=l,this.bluenoteActor=p,this.bluenoteObject=d,this.bluenoteNotificationTypeId=_,this.bluenoteTypedData=f}return Object.defineProperty(e.prototype,"key",{get:function(){return this.userId+" "+this.typeId+" "+this.targetObjectKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUnread",{get:function(){return this.status===i.Unread},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRead",{get:function(){return this.status===i.Read},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInvisible",{get:function(){return this.status===i.Invisible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSeen",{get:function(){return!(this.seenState===o.Unseen&&this.status===i.Unread)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.typeId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"feedTime",{get:function(){return new Date(1e3*this.feedTimeInSec)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"campaignId",{get:function(){var e;if(this.typeId===a.Bluenote){var t=this.typeData;t.campaignInfo&&t.campaignInfo.campaignId&&(e=""+t.campaignInfo.campaignId)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"campaignVersion",{get:function(){if(this.typeId===a.Bluenote){var e=this.typeData;if(e.campaignInfo&&e.campaignInfo.versionId)return e.campaignInfo.versionId}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayTime",{get:function(){return Date.now()-1e3*this.feedTimeInSec>6048e5?n.nice_date_with_month_name(this.feedTime,!1):n.ago(this.feedTime)},enumerable:!0,configurable:!0}),e})();t.UserNotification=r;var u=(function(){function e(){}return e})();t.SharedFolderInviteData=u});
//# sourceMappingURL=pkg-notifications-and-home.min.js-vflKL0Zpe.map