define("modules/clean/account_photo_modal/account_header",["require","exports","jquery"],function(e,t,n){"use strict";function i(t,i,o){n(t).add(i).on("click",function(t){t.preventDefault(),e(["modules/clean/account_photo_modal/controller"],function(e){return(0,e.AccountPhotoModalController.show)()})}),n(document).on("db:account_photo:photo_set",function(e){return n(i).addClass(o)}),n(document).on("db:account_photo:photo_deleted",function(e){return n(i).removeClass(o)})}function o(e){i(e.open_modal_button_selector,e.add_photo_link_selector,e.hide_add_photo_link_class)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=i,t.initialize_module=o}),function(){define("modules/clean/dropbox_nav",["jquery","modules/clean/analytics"],function(e,t){return(function(){function n(){e(".composer-nav-item").click((function(e){return function(){return e.log_click("composer_nav_link_click")}})(this)),e(".mailbox-nav-item").click((function(e){return function(){return e.log_click("mailbox_nav_link_click")}})(this))}return n.prototype.log_click=function(e){return t.WebMiscActivityLogger.log(e)},n})()})}.call(this),define("modules/clean/growth/admin_console_ad",["require","exports","jquery","modules/clean/analytics","modules/clean/dbmodal","modules/core/browser"],function(e,t,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(e,t,a){var s=this;this.handleCTAClick=function(e){e.preventDefault();var t=n(e.target).attr("href");return i.TeamsWebActionsLogger.log("click_admin_console_ad_cta",{},function(){return r.redirect(t)})},this.handleLinkClick=function(e){return e.preventDefault(),i.TeamsWebActionsLogger.log("click_admin_console_ad"),s.modal.show(),n(s.cta_selector).off(),n(s.cta_selector).click(s.handleCTAClick)},this.cta_selector=a,this.modal=new o.DBModal({element_id:t}),n(e).click(this.handleLinkClick)}return e})();t.AdminConsoleAd=a}),function(){define("modules/clean/sharing/sharing_model_modals",["jquery","require","modules/clean/analytics"],function(e,t,n){return{initialize_module:function(i){return n.LegacySharingVortexLogger.log("initialize-sharing-model-modals"),i.instances.forEach(function(n){return e("#"+n.accept_button_dom_id).on("click",function(e){return t(["legacy_js/dropbox"],function(e){var t,n;return n=e.SharingModel,t=e.Modal,n.do_remove(t.vars)})}),e("#"+n.cancel_button_dom_id).on("click",function(e){return t(["legacy_js/dropbox"],function(e){var t;return t=e.Modal,t.hide()})})})}}})}.call(this),function(){define("modules/clean/teams/limited_team_invite_modal",["external/underscore","external/react","modules/core/html","modules/core/uri","modules/core/i18n","modules/core/notify","modules/clean/ajax","modules/clean/contacts/contact","modules/clean/react/modal","modules/clean/teams/limited_team_invite_form","modules/clean/viewer","modules/clean/analytics"],function(e,t,n,i,o,r,a,s,c,l,u,m){var d,_,f,h,p,g,b,v;return p=o._,b=o.ungettext,d=s.Contact,f=c.Modal,_=l.LimitedTeamInviteForm,h=m.TeamsWebActionsLogger,t.DOM,g=t.PropTypes,v=u.get_viewer(),t.createClass({displayName:"LimitedTeamInviteModal",propTypes:{onInvited:g.func,onDismiss:g.func,populatedCustomMessage:g.string,populatedContacts:g.arrayOf(g.instanceOf(d)),memberInviteLimit:g.number,maxTeamSize:g.number},getInitialState:function(){return{canProceed:!1,submitting:!1}},_canProceed:function(){var e,t;return(null!=(e=this.refs.members)?e.areAllContactsValid():void 0)&&!(null!=(t=this.refs.members)?t.isEmpty():void 0)},onClickInvite:function(t){return t.preventDefault(),this.refs.members.getFinalData((function(t){return function(o){var s,c,l;if(l=o.emails,c=o.custom_message,s=t._canProceed(),t.setState({canProceed:s}),s)return t.setState({submitting:!0}),a.WebRequest({url:"/account/team/add_users",subject_user:v.work_user,data:{emails:l,custom_message:c,team_id:v.team_id},complete:function(){if(t.isMounted())return t.setState({submitting:!1})},success:function(o){var a,s,c,l,u,m;return o=JSON.parse(o),s=e.values(o.users),s.length>0?(null!=t.props.memberInviteLimit?(c=t.props.memberInviteLimit-s.length,c>0&&(u={tk:t.props.memberInviteLimit,_camp:"flash"},m=i({path:"/team/upgrade",query:u}),l=b('Members invited. You can invite %(num_rem)s more member before you need to upgrade to Dropbox Business. <a href="%(upsell_url)s">Upgrade now.</a>','Members invited. You can invite %(num_rem)s more members before you need to upgrade to Dropbox Business. <a href="%(upsell_url)s">Upgrade now.</a>',c).format({num_rem:c,upsell_url:m.toString()}),r.success(new n(l)))):r.success(b("Member invited.","Members invited.",s.length)),"function"==typeof(a=t.props).onInvited&&a.onInvited(),t.refs.modal.close()):r.error(p("There was a problem completing this request."))},error:function(e){return"rate-limit"===e.getResponseHeader("x-dropbox-app-error")?r.error(new n(p('%(team_name)s has reached the maximum number of team members allowed on Dropbox Basic. Please <a href="/business/contact">contact sales</a> to add more members to your team.').format({team_name:v.team_name}))):r.error(p("There was a problem completing this request."))}})}})(this))},onDismissModal:function(){var e;return h.log("canceled_invite_team_members"),"function"==typeof(e=this.props).onDismiss?e.onDismiss():void 0},onMembersFormChange:function(){return this.setState({canProceed:this._canProceed()})},_getAcceptButtonText:function(){var e;return b("Send invite","Send invites",(null!=(e=this.refs.members)?e.getContacts().length:void 0)||0)},render:function(){return t.createElement(f,{title:p("Invite members to your team"),acceptButtonText:this._getAcceptButtonText(),dismissButtonText:p("Cancel"),onAccept:this.onClickInvite,onDismiss:this.onDismissModal,acceptButtonDisabled:!this.state.canProceed,submitting:this.state.submitting,className:"limited-team-invite-modal",ref:"modal"},t.createElement(_,{ref:"members",user:v.work_user,onChange:this.onMembersFormChange,errorMessageSpaceFixed:!0,populatedCustomMessage:this.props.populatedCustomMessage,populatedContacts:this.props.populatedContacts,autofocusTokenizer:!0,memberInviteLimit:this.props.memberInviteLimit,maxTeamSize:this.props.maxTeamSize}))}})})}.call(this),function(){define("modules/clean/teams/prop_types",["external/react"],function(e){var t;return t=e.PropTypes,{joinableTeam:t.shape({team_id:t.number,team_name:t.string,num_members:t.number,is_invite:t.bool,is_limited:t.bool,join_request_state:t.number,signup_key:t.string,inviting_user_name:t.string,approver_display_name:t.string,members_to_display:t.arrayOf(t.shape({display_name:t.string.isRequired,avatar_url:t.string}))}),suggestedMember:t.shape({id:t.number,email:t.string,display_name:t.string,avatar_url:t.string}),valueLink:function(e){return null==e&&(e=t.any),t.shape({value:e,requestChange:t.func.isRequired})}}})}.call(this),function(){define("modules/clean/teams/suggest_invites_modal",["external/underscore","external/react","modules/core/i18n","modules/core/notify","modules/clean/ajax","modules/clean/react/modal","modules/clean/teams/limited_team_invite_form","modules/clean/viewer"],function(e,t,n,i,o,r,a,s){var c,l,u,m,d,_;return u=n._,l=r.Modal,c=a.LimitedTeamInviteForm,m=t.createElement,d=t.DOM,_=s.get_viewer(),t.createClass({displayName:"SuggestInvitesModal",getInitialState:function(){return{canProceed:!1,submitting:!1}},_canProceed:function(){var e,t;return(null!=(e=this.refs.members)?e.areAllContactsValid():void 0)&&!(null!=(t=this.refs.members)?t.isEmpty():void 0)},onClickInvite:function(e){return e.preventDefault(),this.refs.members.getFinalData((function(e){return function(t){var n,r;if(r=t.emails,n=e._canProceed(),e.setState({canProceed:n}),n)return e.setState({submitting:!0}),o.WebRequest({url:"/team/manage/suggest-members",data:{emails:r},complete:function(){return e.setState({submitting:!1})},success:function(){return i.success(u("Thanks for your suggestions! We’ve sent them to the team admin.")),e.refs.modal.close()}})}})(this))},onMembersFormChange:function(){return this.setState({canProceed:this._canProceed()})},render:function(){return m(l,{className:"no-scroll-modal",title:u("Suggest %(team_name)s team members").format({team_name:_.team_name}),acceptButtonText:u("Send suggestions"),dismissButtonText:u("Cancel"),onAccept:this.onClickInvite,acceptButtonDisabled:!this.state.canProceed,submitting:this.state.submitting,ref:"modal"},d.div({className:"suggest_invite_modal_notice"},u("We’ll email your suggestions to your team admin, so they can send out invitations.")),m(c,{ref:"members",user:_.work_user,onChange:this.onMembersFormChange,errorMessageSpaceFixed:!1,includeCustomMessage:!1,emailPlaceholder:u("Email addresses"),autofocusTokenizer:!0}))}})})}.call(this),function(){define("modules/clean/unity_browse_interface",["jquery","modules/clean/unity/check_file_cache","modules/clean/unity/features"],function(e,t,n){if(null!=t&&null!=n)return(function(){function e(){}return e.BATCH_SIZE_LIMIT=100,e.CHECK_FILES_PADDING=50,e.check_file_callback=function(e){return t.set_batch(e)},e.browse_visible_change_callback=function(t,i,o,r){var a,s,c,l,u,m;if(t.length&&(l=Math.max(0,o-e.CHECK_FILES_PADDING),m=Math.min(t.length-1,r+e.CHECK_FILES_PADDING),s=t.slice(l,+m+1||9e9),c=e._get_files_to_check(s),c.length)){for(e._remove_unneeded_items_from_cache(s),u=[];c.length;)a=c.splice(0,e.BATCH_SIZE_LIMIT),u.push(n.check_file_batch(a,i,e.check_file_callback));return u}},e._get_files_to_check=function(e){var n;return(function(){var i,o,r;for(r=[],i=0,o=e.length;i<o;i++)n=e[i],n.bytes>=0&&t.is_cached_and_locally_available(n.ns_id,n.ns_path)!==!0&&r.push(n);return r})()},e._remove_unneeded_items_from_cache=function(e){var i,o,r,a,s;for(o={},a=0,s=e.length;a<s;a++)r=e[a],t.is_cached_and_locally_available(r.ns_id,r.ns_path)===!0&&(i=t.get(r.ns_id,r.ns_path),o[n.server_path(r.ns_id,r.ns_path)]=i);return t.clear(),t.set_batch(o)},e})()})}.call(this);
//# sourceMappingURL=pkg-legacy-ag.min.js-vflKI2bMF.map