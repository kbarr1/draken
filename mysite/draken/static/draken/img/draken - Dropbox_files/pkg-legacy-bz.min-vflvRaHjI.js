(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function o(){this.constructor=e}for(var i in t)n.call(t,i)&&(e[i]=t[i]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},n={}.hasOwnProperty;define("modules/clean/legacy_pyxl_controllers/overquota_bubble_dropdown",["jquery","external/underscore","modules/clean/keycode","modules/clean/stormcrow/stormcrow_exposure_logger","modules/clean/legacy_pyxl_controllers/bubble_dropdown"],function(n,o,i,r,a){var s;return i.KeyCode,s=r.StormcrowExposureLogger,(function(n){function o(t){this._toggle_bubble=e(this._toggle_bubble,this),this.temp_var=t,o.__super__.constructor.apply(this,arguments),this.stormcrow_logger=new s}return t(o,n),o.prototype._toggle_bubble=function(){return this._dropdown_shown?this._hide_bubble():(this._show_bubble(),this.stormcrow_logger.logExposuresOnce({subgrowth_pro_header_dropdown_overquota:this.temp_var})),!0},o})(a)})}).call(this),function(){define("modules/clean/upsell/top_notification",["jquery","modules/core/notify","modules/clean/upsell/exception","modules/clean/upsell/upsell_controller","modules/clean/upsell/top_notification_common","modules/clean/account/email","modules/clean/account/email_verify_reasons","modules/clean/top_notif","modules/clean/viewer"],function(e,t,n,o,i,r,a,s,l){var c;return c=r.EmailVerification,(function(){function r(e,t){var o;this.options=t;try{this._constructor(e)}catch(e){o=e,n.reportJsControllerException({err:o,js_controller_options:this.options})}}return r.prototype._constructor=function(n){var r,u;return this.options.isMaestro&&(e("#notify-wrapper").addClass("with-top-notification"),i.setTopNotificationClassOnBodyElement()),this.$top_notification_bar=e(n),this.$top_notification_bar.children().hasClass("over-quota-prompt-space")&&(this._resize_space_notification_bar(),e(window).on("resize",this._resize_space_notification_bar)),this.options.notDismissable?r=e():(r=this.$top_notification_bar.find("a:not(.dismiss-button)"),this.options.confirmInNewTab&&r.attr("target","_blank")),u=new o(r,this.$top_notification_bar.find(".dismiss-button"),this.options),u.log_impression(),o.register_custom_controller({on_confirm:this._on_acknowledge,on_dismiss:this._on_acknowledge}),this.$top_notification_bar.find("a").on("click",(function(t){return function(n){if(e(n.currentTarget).hasClass("top-notification-bar-dismiss")&&n.preventDefault(),!t.options.notDismissable)return s.TopNotificationBar.hide({clearPageletCache:!1})}})(this)),this.$top_notification_bar.find(".prompt-banner-email-verify-resend-link").on("click",(function(n){return function(o){var i,r,s;if(o.preventDefault(),u.log_event("send-email-link-clicked"),r=(function(){var e,t,n,o;for(n=l.get_viewer().get_users(),o=[],e=0,t=n.length;e<t;e++)s=n[e],s.is_email_verified||o.push(s);return o})()[0],null!=r)return i=c.get_for_user(r),i.send_email(a.PROMPT_CAMPAIGN,function(){return u.log_event("verification-email-sent"),t.success("Verification email sent!",5)}),i.ensure_polling(function(){return n.$top_notification_bar.hide(),e("body").removeClass("top-notification-bar"),u.log_event("email-verified"),t.success("Your email address was verified!")})}})(this)),this.$top_notification_bar.find(".over-quota-prompt-icon").on("mouseover",function(t){var n,o,i,r;return n=e("#over-quota-prompt-hover"),i=n.find(".over-quota-prompt-icon").position(),r=i.top+25,o=i.left-50,n.find("#tooltip-selector").css("padding","20px"),n.find(".tooltip-inner").css({width:"275px","text-align":"left"}),n.find(".tooltip-bubble").css({top:r,left:o,display:"block","font-size":"12px"}),n.find("#tooltip-selector").on("mouseleave",function(t){return e(".tooltip-bubble").css("display","none")})})},r.prototype._resize_space_notification_bar=function(){var t,n;return n=e(window).width(),t=.1*n,e("#top-notification-bar-container").css({"border-left":t+"px solid #F2768B"}),e("#prompt-top-notification-bar").css({"margin-left":t*-2+30+"px"})},r.prototype.unregister_custom_controller=function(){return o.unregister_custom_controller({on_confirm:this._on_acknowledge,on_dismiss:this._on_acknowledge})},r.prototype._on_acknowledge=function(e,t){if(!t.notDismissable&&window.ensemble&&window.ensemble.clearPageletCache)return window.ensemble.clearPageletCache()},r})()})}.call(this),define("modules/clean/user_education/react/user_education_banner",["require","exports","tslib","external/underscore","external/react","external/classnames","modules/clean/user_education/user_education_interface","modules/clean/user_education/user_education_client","modules/clean/user_education/react/user_education_spotlight","modules/clean/user_education/react/user_education_pulsar","modules/clean/user_education/react/user_education_tooltip","modules/clean/react/image","modules/clean/react/modal","modules/clean/static_urls","modules/core/i18n"],function(e,t,n,o,i,r,a,s,l,c,u,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var m=i.addons.CSSTransitionGroup,_=(function(e){function t(t){var n=e.call(this,t)||this;return n.state={banner:{hide:t.hideOnload}},n.handleUpdate=n.handleUpdate.bind(n),n.handleRequestedEffectState=n.handleRequestedEffectState.bind(n),n.handleNextClick=n.handleNextClick.bind(n),n.handleExitClick=n.handleExitClick.bind(n),n.handleSkipClick=n.handleSkipClick.bind(n),n.handleOverlayClick=n.handleOverlayClick.bind(n),n.handleExitOnboarding=n.handleExitOnboarding.bind(n),n}return n.__extends(t,e),t.prototype.componentWillMount=function(){s.eventEmitter.on(a.UserEducationStateChannel,this.handleUpdate,this),s.eventEmitter.on(a.UserEducationEffectChannel,this.handleRequestedEffectState,this)},t.prototype.componentWillUnmount=function(){s.eventEmitter.removeListener(a.UserEducationStateChannel,this.handleUpdate,this),s.eventEmitter.removeListener(a.UserEducationEffectChannel,this.handleRequestedEffectState,this)},t.prototype.handleRequestedEffectState=function(e){this._canRequestEffect(e)&&!this._isEffectEqual(this.state.requestedEffect,e)&&this.setState({requestedEffect:e,banner:this.state.banner})},t.prototype._isEffectEqual=function(e,t){return o.isEqual(e,t)&&this._isRectEqual(e.rect,t.rect)},t.prototype._isRectEqual=function(e,t){return e.top===t.top&&e.bottom===t.bottom&&e.left===t.left&&e.right===t.right&&e.width===t.width&&e.height===t.height},t.prototype._canRequestEffect=function(e){return this.state.effect&&e.requester===this.state.effect.containerName+"."+this.state.effect.elementName},t.prototype.handleUpdate=function(e){if(e.state===a.UEEventType.ShowStep){var t=e.step;if(t.banner)return void this.setState({banner:t.banner,effect:t.effect,stepName:t.name})}this.setState({banner:{hide:!0,showNext:!1,canSkip:!1,isLastStep:this.state.banner.isLastStep,title:"",subtitle:""},effect:void 0})},t.prototype.handleNextClick=function(e){void 0===e&&(e={}),s.UEClient.sendEvent(t.displayName,"nextClicked",e)},t.prototype.handleExitClick=function(){this.props.handleExitClick?this.props.handleExitClick():this.showEndTourModal({source:"exit-link"})},t.prototype.handleSkipClick=function(){this.showEndTourModal({source:"skip-link"})},t.prototype.handleOverlayClick=function(){this.state.effect&&this.state.effect.effect===a.UEEffectType.ToolTip?this.handleExitOnboarding():this.props.useHappyZone?this.handleNextClick():this.showEndTourModal()},t.prototype.handleExitOnboarding=function(e){void 0===e&&(e={}),s.UEClient.sendEvent(t.displayName,"exitOnboarding",e)},t.prototype.showEndTourModal=function(e){var t=this;void 0===e&&(e={});var n,o=function(){return t.handleExitOnboarding(e)};if(this.props.experiments&&(n=this.props.experiments.subgrowthBizTeamExitModal),"V1"===n)p.Modal.showInstance(i.createElement(p.Modal,{title:h._("End the tour?"),acceptButtonText:h._("Continue"),dismissButtonText:h._("End"),onDismiss:o,className:"subgrowth_biz_team_exit_modal--V1"},i.createElement("div",{className:"db-modal-content-text"},h._("Click ‘Continue’ to keep learning about your new Dropbox."))));else if("V2"===n)p.Modal.showInstance(i.createElement(p.Modal,{title:h._("Keep learning about your new Dropbox"),acceptButtonText:h._("Keep learning"),onDismiss:o,className:"subgrowth_biz_team_exit_modal--V2"},i.createElement("div",{className:"db-modal-content-text"},h._("Closing this dialog window will end the tour here, or click on ‘Keep learning’ to continue."))));else{var r=void 0;r=this.props.useHappyZone?h._("To keep learning about your new Dropbox account, click <b>Cancel</b>."):h._("To keep learning about your new Dropbox account, click ‘cancel’."),p.SimpleModal.show({title_text:h._("End the tour?"),body_html:r,cancel_text:h._("Cancel"),confirm_text:h._("End tour"),confirm_callback:o})}},t.prototype.shouldHaveWrappedOverlay=function(){return this.state.requestedEffect&&this._canRequestEffect(this.state.requestedEffect)&&this.state.effect&&this.state.effect.effect===a.UEEffectType.Pulsar},t.prototype.renderOverlay=function(){if(!this.state.banner.hide||this.state.effect&&this.state.effect.effect===a.UEEffectType.ToolTip){if(this.shouldHaveWrappedOverlay()){var e=this.state.requestedEffect.rect,t={top:0,left:0,width:e.left,bottom:0},n={top:0,left:e.left,width:e.width,height:e.top},o={top:0,right:0,left:e.left+e.width,bottom:0},r={top:e.top+e.height,left:e.left,width:e.width,bottom:0};return i.createElement("div",{className:"ue-overlay-container"},i.createElement("div",{className:"ue-partial-overlay",style:t,onClick:this.handleOverlayClick}),i.createElement("div",{className:"ue-partial-overlay",style:n,onClick:this.handleOverlayClick}),i.createElement("div",{className:"ue-partial-overlay",style:o,onClick:this.handleOverlayClick}),i.createElement("div",{className:"ue-partial-overlay",style:r,onClick:this.handleOverlayClick}))}return i.createElement("div",{className:"ue-full-overlay",onClick:this.handleOverlayClick})}return null},t.prototype.renderExit=function(){var e=this.state.banner.showExit||this.state.banner.canSkip,t=this.props.experiments&&this.props.experiments.subgrowthBizOnboardingTourSkipRwl;return e&&t?i.createElement("p",null,i.createElement("button",{className:"ue-exit-link",onClick:this.handleExitClick},"Exit")):null},t.prototype.renderButton=function(){if(this.state.banner.showNext){var e=void 0;return e=this.state.banner.cta?this.state.banner.cta:this.state.banner.isLastStep?h._("Done"):h._("Next"),i.createElement("button",{className:"ue-next-button button-secondary",onClick:this.handleNextClick},e)}return null},t.prototype.renderSkip=function(){var e=this,t=this.props.experiments&&this.props.experiments.subgrowthBizOnboardingTourSkipRwl,n=this.state.effect&&t;if(this.state.banner.canSkip&&!n){var o=void 0;o=this.props.useHappyZone?h._("End tour"):h._("Skip");var r=this.handleSkipClick;return t&&(r=this.props.handleSkipClick?this.props.handleSkipClick:function(){return e.handleNextClick({source:"skip-link"})}),i.createElement("p",null,i.createElement("button",{className:"ue-skip-link",onClick:r},o))}return null},t.prototype.renderLoadingImg=function(){return this.state.banner.showLoading?i.createElement(d,{className:"ue-banner-loading-img",src:f.static_url("/static/images/dotload-vfl8mEFXg.gif"),srcHiRes:f.static_url("/static/images/dotload@2x-vfl66Z9jW.gif"),alt:h._("Animated loading icon.")}):null},t.prototype.renderEffect=function(){var e=null,t=null,o=null;if(this.state.effect&&this.state.requestedEffect&&this._canRequestEffect(this.state.requestedEffect)){var r=this.state.requestedEffect.rect;this.state.effect.effect===a.UEEffectType.Spotlight?e=i.createElement(l.UserEducationSpotlight,n.__assign({},this.state.effect.effectDetail,{rect:r,key:this.state.effect.containerName+"."+this.state.effect.elementName,experiments:this.props.experiments})):this.state.effect.effect===a.UEEffectType.Pulsar?t=i.createElement(c.UserEducationPulsar,n.__assign({},this.state.effect.effectDetail,{rect:r})):this.state.effect.effect===a.UEEffectType.ToolTip&&(o=i.createElement(u.UserEducationToolTip,n.__assign({},this.state.effect.effectDetail,{rect:r})))}return i.createElement("div",null,i.createElement(m,{transitionName:"ue-spotlight",transitionAppear:!1,transitionEnter:this.props.useReactCSSTransitionGroup,transitionLeave:this.props.useReactCSSTransitionGroup,transitionEnterTimeout:400,transitionLeaveTimeout:300},e),t,i.createElement(m,{transitionName:"ue-tooltip",transitionAppear:!0,transitionEnter:this.props.useReactCSSTransitionGroup,transitionLeave:this.props.useReactCSSTransitionGroup,transitionEnterTimeout:400,transitionLeaveTimeout:300},o))},t.prototype.render=function(){var e=r({"ue-banner-container":!0,hide:this.state.banner.hide,showNext:this.state.banner.showNext||!1,"confirmation-banner":this.state.banner.isLastStep||!1},"ue-step-"+this.state.stepName);return i.createElement("div",null,this.renderOverlay(),this.renderEffect(),i.createElement("div",{className:e},i.createElement(m,{transitionName:"ue-banner-center-contents",transitionAppear:!1,transitionEnter:this.props.useReactCSSTransitionGroup,transitionLeave:this.props.useReactCSSTransitionGroup,transitionEnterTimeout:700,transitionLeaveTimeout:400},i.createElement("div",{className:"ue-banner-center-contents",key:this.state.banner.title},i.createElement("h1",{className:"ue-banner-title"},this.state.banner.title),i.createElement("p",{className:"ue-banner-subtitle"},this.state.banner.subtitle),this.renderLoadingImg(),this.renderButton())),this.renderExit(),this.renderSkip()))},t})(i.Component);_.displayName="UserEducationBanner",_.defaultProps={hideOnload:!0,useReactCSSTransitionGroup:!0},t.UserEducationBanner=_}),define("modules/clean/user_education/react/user_education_pulsar",["require","exports","tslib","external/react","modules/clean/user_education/user_education_interface"],function(e,t,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getOffsetX=function(){var e=i.UserEducationPulsarSize/2,t=0;switch(this.props.position){case i.UserEducationEffectPosition.Center:t=this.props.rect.width/2+e;break;case i.UserEducationEffectPosition.LeftCenter:t=0+e,1;break;case i.UserEducationEffectPosition.RightCenter:t=this.props.rect.width-e,-1;break;default:throw new Error("UserEducationSpotlight: unknown postion value "+this.props.position)}return this.props.rect.left+t+this.props.offsetX},t.prototype.getOffsetY=function(){return this.props.rect.top+this.props.rect.height/2+this.props.offsetY},t.prototype.render=function(){var e={top:this.getOffsetY(),left:this.getOffsetX()};return o.createElement("div",{className:"ue-pulse",style:e},o.createElement("svg",{className:"ue-pulse-svg"},o.createElement("circle",{cx:"50%",cy:"50%",r:"50%"})))},t})(o.Component);r.displayName="UserEducationPulsar",r.defaultProps={position:i.UserEducationEffectPosition.LeftCenter,offsetX:0,offsetY:0},t.UserEducationPulsar=r}),define("modules/clean/user_education/react/user_education_spotlight",["require","exports","tslib","external/react","external/classnames","modules/clean/user_education/user_education_interface","modules/clean/react/image","modules/clean/static_urls"],function(e,t,n,o,i,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getSizeClass=function(){switch(this.props.size){case r.UserEducationSpotlightSize.Small:return"small";case r.UserEducationSpotlightSize.Medium:return"medium";case r.UserEducationSpotlightSize.Large:return"large";case r.UserEducationSpotlightSize.XLarge:return"x-large"}throw new Error("Unknown UserEducationSpotlightSize")},t.prototype.getOffsetX=function(){var e=0,t=0;switch(this.props.position){case r.UserEducationEffectPosition.Center:e=this.props.rect.width/2;break;case r.UserEducationEffectPosition.LeftCenter:e=0,t=1;break;case r.UserEducationEffectPosition.RightCenter:e=this.props.rect.width,t=-1;break;default:throw new Error("UserEducationSpotlight: unknown postion value "+this.props.position)}switch(this.props.size){case r.UserEducationSpotlightSize.Small:e+=40*t;break;case r.UserEducationSpotlightSize.Medium:e+=50*t;break;case r.UserEducationSpotlightSize.Large:e+=75*t;break;case r.UserEducationSpotlightSize.XLarge:e+=100*t;break;default:throw new Error("UserEducationSpotlight: unknown size value "+this.props.size)}return this.props.rect.left+e+this.props.offsetX},t.prototype.getOffsetY=function(){return this.props.rect.top+this.props.rect.height/2+this.props.offsetY},t.prototype.render=function(){var e={top:this.getOffsetY(),left:this.getOffsetX()};return o.createElement("div",{className:"ue-spotlight",style:e},o.createElement(a,{className:i("ue-spotlight-circle",this.getSizeClass()),src:s.static_url("/static/images/spotlight-vfllMyJQf.svg")}))},t})(o.Component);l.displayName="UserEducationSpotlight",l.defaultProps={size:r.UserEducationSpotlightSize.Medium,position:r.UserEducationEffectPosition.LeftCenter,offsetX:0,offsetY:0},t.UserEducationSpotlight=l}),define("modules/clean/user_education/user_education_controller",["require","exports","tslib","external/underscore","external/redux","modules/clean/user_education/user_education_interface","modules/clean/user_education/user_education_client","modules/core/browser","modules/clean/ajax"],function(e,t,n,o,i,r,a,s,l){"use strict";function c(){a.eventEmitter.on(r.UserEducationStateChannel,function(e){(console.warn||console.log)("MASTER-"+r.UserEducationStateChannel,e)}),a.eventEmitter.on(r.UserEducationEventChannel,function(e){console.log("MASTER-"+r.UserEducationEventChannel,e)})}function u(){return i.createStore(p)}function d(e,t,n,o){if(window.ensemble){var i=window.ensemble.viewer.getActiveUser().userId,r={module_name:e,event_name:t,status:n,extra:JSON.stringify(o)};r._subject_uid=String(i),l.SilentBackgroundRequest({url:"/log/onboarding",data:r})}}function p(e,i){if(!e)return E;if(m(i,t.AddModuleAction)){var r=i.payload.module;return n.__assign({},e,{modules:n.__assign({},e.modules,(d={},d[r.name]=r,d))})}if(m(i,t.ActivateAndAdvanceAction)){var a=i.payload,s=a.name,l=a.step;if(!e.modules[s])throw new Error("module("+s+") does not exists");if(l>=e.modules[s].steps.length)throw new Error("module("+s+") step("+l+") is out of bound");return n.__assign({},e,{activeModule:s,curStep:l})}if(m(i,t.ExitModuleEventAction))return n.__assign({},e,{activeModule:"",curStep:-1});if(m(i,t.UserEducationEventAction)){if(e.activeModule){var c=e.modules[e.activeModule].steps[e.curStep].condition;if(f(c,i.payload.event))return e.modules[e.activeModule].steps.length===e.curStep+1?n.__assign({},e,{activeModule:"",curStep:-1,finishedModules:e.finishedModules.concat([e.activeModule])}):n.__assign({},e,{curStep:e.curStep+1})}else for(var s in e.modules)if(o.indexOf(e.finishedModules,s)===-1){var u=e.modules[s],c=u.steps[0].condition;if(f(c,i.payload.event))return n.__assign({},e,{activeModule:s,curStep:1})}return e}return e;var d}function f(e,t){var n=e.eventName,i=e.eventData;return n===t.containerName+"."+t.name&&o.isMatch(t.data||{},i)}Object.defineProperty(t,"__esModule",{value:!0}),t.STATE_KEY_FOR_LOCAL_STORAGE="db-user-eudcation-state";var h=function(e){return o.extend(function(t){return{type:e,payload:t}},{type:e})},m=function(e,t){return e.type===t.type};t.AddModuleAction=h("ADD_MODULE"),t.ActivateAndAdvanceAction=h("ACTIVATE_AND_ADVANCE"),t.ExitModuleEventAction=h("EXIT_MODULE"),t.UserEducationEventAction=h("UE_EVENT"),t.initializeReduxStore=u;var _=(function(){function n(e,n,o,i){void 0===i&&(i=null),n&&c(),this.store=u(),this.canContinueOnboarding=o;for(var s=0,l=e;s<l.length;s++){var d=l[s];this.store.dispatch(t.AddModuleAction({module:d}))}this.handleEvent=this.handleEvent.bind(this),a.eventEmitter.on(r.UserEducationEventChannel,this.handleEvent,this),this.loadStateDataLocally(e,i)&&a.eventEmitter.emit(r.UserEducationStateChannel,{state:r.UEEventType.Ready}),this.sendCurState()}return n.prototype.haveActiveOnboarding=function(){return""!==this.store.getState().activeModule},n.prototype.unsubscribe=function(){a.eventEmitter.removeListener(r.UserEducationEventChannel,this.handleEvent,this)},n.prototype._sendState=function(e){a.eventEmitter.emit(r.UserEducationStateChannel,e)},n.prototype.sendCurState=function(){this._sendState(this._getCurState())},n.getNameOfModuleRequiredForConstructor=function(){if(localStorage){var e=localStorage.getItem(t.STATE_KEY_FOR_LOCAL_STORAGE);if(e)return JSON.parse(e).activeModule}return null},n.prototype.loadStateDataLocally=function(e,n){if(localStorage&&this.canContinueOnboarding){var o=localStorage.getItem(t.STATE_KEY_FOR_LOCAL_STORAGE);if(o){var i=JSON.parse(o);if(null===n||i.activeModule===n){var r=this._getBrowserUriPath(),a=this._getUrlCondition(e,i.activeModule,i.curStep);if(void 0===a||0===r.indexOf(a))return this.store.dispatch(t.ActivateAndAdvanceAction({name:i.activeModule,step:i.curStep})),!0}}}return!1},n.prototype._getBrowserUriPath=function(){return s.get_uri().path},n.prototype.storeStateDataLocally=function(e,n){if(this.canContinueOnboarding){var o=JSON.stringify({activeModule:e,curStep:n});localStorage.setItem(t.STATE_KEY_FOR_LOCAL_STORAGE,o)}},n.prototype.removeStateDataLocally=function(){this.canContinueOnboarding&&null!==localStorage.getItem(t.STATE_KEY_FOR_LOCAL_STORAGE)&&localStorage.removeItem(t.STATE_KEY_FOR_LOCAL_STORAGE)},n.prototype.handleEvent=function(e){if(e.name===r.UEEventType.Subscribe)this.sendCurState();else{var n=this.store.getState();if(this.isExitModuleEvent(e)){if(this.store.dispatch(t.ExitModuleEventAction({})),this.markHomeOnboardingComplete(n.activeModule),n.activeModule){var i=this._getCurrentStepName(n),a=e&&o.isEmpty(e.data)?e.data:null;d(n.activeModule,i,"skip",a)}this.removeStateDataLocally()}else this.store.dispatch(t.UserEducationEventAction({event:e}));var s=this.store.getState();if(!o.isEqual(n,s))if(this.sendCurState(),s.activeModule){var i=this._getCurrentStepName(s);if(i){var a=e&&o.isEmpty(e.data)?e.data:null;d(s.activeModule,i,"shown",a)}void 0!==s.modules[s.activeModule].steps[s.curStep].validUrl&&this.storeStateDataLocally(s.activeModule,s.curStep)}else o.isEqual(n.finishedModules,s.finishedModules)||(this.markHomeOnboardingComplete(n.activeModule),d(s.finishedModules[s.finishedModules.length-1],"finished",null,null),this.removeStateDataLocally())}},n.prototype.markHomeOnboardingComplete=function(t){"home_v1"===t&&e(["modules/clean/react/home/home_access/onboarding/actions"],function(e){return e.markHomeOnboardingComplete()})},n.prototype.isExitModuleEvent=function(e){return"UserEducationBanner"===e.containerName&&"exitOnboarding"===e.name},n.prototype._getCurState=function(){var e=this.store.getState();return e.activeModule||0!==e.finishedModules.length?e.activeModule?{state:r.UEEventType.ShowStep,step:e.modules[e.activeModule].steps[e.curStep]}:{state:r.UEEventType.Finished}:{state:r.UEEventType.Ready}},n.prototype._getCurrentStepName=function(e){if(e.activeModule){return e.modules[e.activeModule].steps[e.curStep].name||""}return""},n.prototype._getUrlCondition=function(e,t,n){if(t)for(var o=0,i=e;o<i.length;o++){var r=i[o];if(r.name===t)return r.steps[n].validUrl}},n})();t.UserEducationController=_;var E={activeModule:"",curStep:-1,modules:{},finishedModules:[]}}),define("modules/clean/user_education/user_education_pagelet",["require","exports","jquery","external/react","external/react-dom","modules/clean/react/modal","modules/clean/user_education/user_education_loader","modules/clean/user_education/user_education_client","modules/clean/user_education/user_education_controller","modules/clean/user_education/react/user_education_banner","modules/clean/web_timing_logger"],function(e,t,n,o,i,r,a,s,l,c,u){"use strict";function d(t){function r(e,o){if(null!==e&&null!==o){var i=[],r=l.UserEducationController.getNameOfModuleRequiredForConstructor();null===r||o.includes(r)||o.push(r);for(var a=0,s=o;a<s.length;a++){var c=s[a];e[c]?i.push(e[c]):console.error("UserEducationModule was not found",c)}m&&console.log("Initializing User Education modules:",o),f=new l.UserEducationController(i,m,t.canContinueOnboarding,t.asyncLoadOverride),n(window).on("beforeunload",d),!f.haveActiveOnboarding()&&t.asyncLoadOverride&&p(t.asyncLoadOverride)}}function d(){s.UEClient.sendEvent("Page","Navigation")}function h(){e(["modules/clean/user_education/modules/all"],function(e){E=e.UEModules,r(E,v)})}var m=localStorage&&"ON"===localStorage.getItem("db-user-eudcation-debug");if(t.addBanner){var _=document.getElementById("user-education");_&&i.render(o.createElement(c.UserEducationBanner,{hideOnload:!0,experiments:t.experiments,useHappyZone:t.useHappyZone}),_)}"OFF"===t.asyncLoadOverride&&(t.asyncLoadOverride=null);var E=null,v=null;t.loadPostTTI?u.waitForTTI().then(h):h(),t.asyncLoadOverride&&a.UELoader.notifyModuleToLoad(t.asyncLoadOverride),a.UELoader.setLoadingCallback(function(e){v=[],null!==e&&v.push(e),r(E,v)})}function p(e){var t=o.createElement("div",null,o.createElement("img",{className:"welcome-maestro-modal__dropbox-illo u-mar-top-s",alt:"Dropbox logo",src:"/static/images/teams/onboarding/welcome_dropbox_illo-vflPEZsCl.png"}),o.createElement("h1",{className:"welcome-maestro-modal__header"},e),o.createElement("div",{className:"welcome-maestro-modal__subheader"},"This is modal is for testing onboarding module.")),n=o.createElement(r.Modal,{acceptButtonText:"Next",clickOutToClose:!1,width:540,style:"clean",className:"welcome-maestro-modal",showX:!1,onAccept:function(){s.UEClient.sendEvent("OnboardingPromptModal","ConfirmButtonClicked",{name:e})}},t);r.Modal.showInstance(n),s.UEClient.sendEvent("OnboardingPromptModal","Shown",{name:e})}Object.defineProperty(t,"__esModule",{value:!0});var f;t.initialize_module=d});
//# sourceMappingURL=pkg-legacy-bz.min.js-vfl6FOUgZ.map