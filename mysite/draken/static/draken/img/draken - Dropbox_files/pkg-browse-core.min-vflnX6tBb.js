define("modules/clean/photos/thumb_loading/generic_thumb_store",["require","exports","modules/clean/photos/thumb_loading/http2_thumb_loader","modules/core/exception"],function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(e,t){this.loaderBatches=!1,this.thumbUrlToData={},this.callbackByRequestId={},this.loaderBatches=!!t,this.thumbLoader=e?e:new n.Http2ThumbLoader}return e.prototype.is_batching=function(){return this.loaderBatches},e.prototype.bind_url=function(e,t){var n=this;if(o.assert(!!t.onSuccess,"missing onSuccess handler"),this.thumbUrlToData[e])return t.onRequest&&t.onRequest(!0),t.onSuccess(!0),null;var r=this.thumbLoader.get_request_id();this.callbackByRequestId[r]=t;var a=function(){var e=n.callbackByRequestId[r];e&&e.onRequest&&e.onRequest(!1)},i=function(t){n.thumbUrlToData[e]=t;var o=n.callbackByRequestId[r];o&&o.onSuccess(!1)},l=function(){var e=n.callbackByRequestId[r];e&&e.onError&&e.onError()},s=function(){return n.callbackByRequestId.hasOwnProperty(r)};return this.thumbLoader.load_image(e,r,a,i,l,s),r},e.prototype.unbind_url=function(e){e&&(delete this.callbackByRequestId[e],this.thumbLoader.cancel_thumb(e))},e.prototype.get_thumb=function(e){return this.thumbUrlToData[e]?this.thumbUrlToData[e]:null},e})();t.GenericThumbStore=r}),define("modules/clean/photos/thumb_loading/http2_thumb_loader",["require","exports","modules/clean/photos/thumb_loading/utils"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(){function e(){this.http2RequestId=0}return e.prototype.get_request_id=function(){return this.http2RequestId+=1,this.http2RequestId.toString()},e.prototype.load_image=function(e,t,o,r,a,i){o(),n.load_individual_image(e,1,r,a,i)},e.prototype.cancel_thumb=function(e){},e})();t.Http2ThumbLoader=o}),define("modules/clean/photos/thumb_loading/utils",["require","exports"],function(e,t){"use strict";function n(e,t,n,o,r){var a=new Image;a.onload=function(){return n(e)},a.onerror=function(){t>0&&r()?(t-=1,a.src=e):o()},a.src=e}Object.defineProperty(t,"__esModule",{value:!0}),t.load_individual_image=n}),define("modules/clean/react/app_actions_view",["require","exports","tslib","external/classnames","external/spectrum/button","external/spectrum/icon_action","external/spectrum/popover","external/spectrum/overflow_button","external/spectrum/tertiary_link","external/react","modules/clean/react/css","modules/clean/react/sprite_div","modules/clean/user_education/user_education_client","modules/clean/react/file_uploader/upload_button"],function(e,t,n,o,r,a,i,l,s,u,c,d,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(){return null},h=function(e){var t=e.primaryMenuItem,n=e.secondaryMenuItems,o=e.popoverTriggerLabel,r=[];t&&(r=r.concat([t])),n&&(r=r.concat(n));var s=function(e){e.handleClick&&e.handleClick()};return r.length&&o?u.createElement(i.Popover,{onSelection:s},u.createElement(i.PopoverTrigger,null,u.createElement(l.OverflowButton,{tagName:"span","aria-label":o,variant:"borderless"})),u.createElement(i.PopoverContent,{attachment:"right"},r.map(function(e){return u.createElement(i.PopoverContentItem,{key:e.displayName,value:e,className:e.className,disabled:e.disabled},e.iconName&&u.createElement(a.IconAction,{name:e.iconName,className:"popover-item-icon"}),e.displayName)}))):u.createElement("noscript",null)},y=function(e,t,n){p.UEClient.sendEvent(e,t),n&&n()},_=function(e){var t=e.primaryMenuItem,n=e.headerText;if(t&&Object.keys(t).length>0){var a=o("primary-action-menu__button",t.className),i=a.indexOf("action-upload")>=0,l=u.createElement(p.UserEducationEffect,{containerName:"AppActionsView",name:"PrimaryButtonText",useSpan:!0},t.displayName);return u.createElement("div",{className:"primary-action-menu"},u.createElement("span",{className:"primary-action-menu__header-text"},n),u.createElement("div",{className:"primary-action-menu__button-wrapper"},i?u.createElement(m.UploadButton,{className:a,disabled:t.disabled,handleClick:function(){y("AppActionsView","PrimaryButtonTextClicked",t.handleClick)},variant:"primary"},l):u.createElement(r.Button,{className:a,disabled:t.disabled,onClick:t.handleClick,variant:"primary"},l)))}return u.createElement("noscript",null)},b=function(e){var t=e.menuItem,n=t.disabled,r=t.displayName,a=t.handleClick,i=t.iconName,l=o("secondary-action-menu__button",e.menuItem.className),c=l.indexOf("action-upload")>=0,d=u.createElement(p.UserEducationEffect,{containerName:"AppActionsView",name:"SecondaryActionMenu-text-"+i},r);return c?u.createElement(m.UploadButton,{key:r,iconName:i,handleClick:function(){y("AppActionsView","SecondaryActionMenu-text-"+i+"-Clicked",a)},disabled:n,className:l,variant:"secondary"},d):u.createElement(s.TertiaryLink,{key:r,icon:i,onClick:function(){y("AppActionsView","SecondaryActionMenu-text-"+i+"-Clicked",a)},disabled:n,className:l},d)},v=function(e){var t=e.menuItem;return u.createElement("button",{className:o({"secondary-action-menu__button":!0,"secondary-action-menu__button--legacy":!0,disabled:t.disabled}),onClick:t.disabled?f:function(){y("AppActionsView","SecondaryActionMenu-text-"+t.spriteName+"-Clicked",t.handleClick)}},u.createElement(d,{alt:t.iconAlt||"",group:t.iconGroup||"web",name:t.spriteName}),u.createElement("span",{className:"secondary-action-menu__button-text"},u.createElement(p.UserEducationEffect,{containerName:"AppActionsView",name:"SecondaryActionMenu-text-"+t.spriteName},t.displayName)))},g=function(e){var t=e.secondaryMenuItems;return u.createElement(s.TertiaryList,{className:"secondary-action-menu"},t.map(function(e){return e.spriteName?u.createElement(v,{key:e.displayName,menuItem:e}):u.createElement(b,{key:e.displayName,menuItem:e})}))},U=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.handleComponentTTI("AppActionsView")},t.prototype.render=function(){var e=this.props,t=e.responsive,n=e.primaryMenuItem,o=e.primarySubnode,r=e.secondaryMenuItems,a=e.headerText,i=e.popoverTriggerLabel,l=!(!t||!t.isResponsive||t.isMatchedLarge);return u.createElement("div",{className:"appactions-menu"},l&&u.createElement("div",{className:"appactions-menu--popover"},n&&i&&u.createElement(h,{primaryMenuItem:n,secondaryMenuItems:r,popoverTriggerLabel:i})),!l&&u.createElement("div",{className:"appactions-menu--buttons"},n&&u.createElement(_,{primaryMenuItem:n,headerText:a}),o,r&&u.createElement(g,{secondaryMenuItems:r})))},t})(u.PureComponent);U.defaultProps={headerText:"",secondaryMenuItems:[],handleComponentTTI:function(){}};var E=c(U,["/static/css/spectrum/index-vflsJ4Dxr.css","/static/css/dropbox/app_actions-vflt3Wz8h.css"]);t.AppActionsView=E}),define("modules/clean/react/file_uploader/file_uploader",["require","exports","tslib","external/react","modules/constants/file_uploader","modules/core/exception"],function(e,t,n,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=null,l=(function(t){function l(e){var n=t.call(this,e)||this;return n.path=n.props.initialPath?n.props.initialPath:"/",n.state={fileUploaderCoffee:void 0,fileUploaderNew:void 0,uploaderStore:void 0,uploaderActions:void 0},n.props.loadOnRender&&l.requireFileUploader({}),i?a.reportStack("Only one FileUploader component may be rendered to the page at any time.You have tried to instantiate multiple uploaders.",{severity:a.SEVERITY.CRITICAL}):i=n,n}return n.__extends(l,t),l.requireFileUploader=function(t){var n=t.modalType,o=t.enableBrowseButton;r.UPLOADER_NEW_TYPESCRIPT?e(["modules/clean/react/file_uploader/uploader_new","modules/clean/react/file_uploader/store","modules/clean/react/file_uploader/actions"],function(e,t,r){i&&(i.setAsyncRequiredUploaderModules(e,r,t),n&&l.showModal(n),"boolean"==typeof o&&l.setBrowseButton(o))}):e(["modules/clean/react/file_uploader/uploader","modules/clean/react/file_uploader/store","modules/clean/react/file_uploader/actions"],function(e,t,r){i&&(i.setAsyncRequiredUploaderModules(e,r,t),n&&l.showModal(n),"boolean"==typeof o&&l.setBrowseButton(o))})},l.prototype.setAsyncRequiredUploaderModules=function(e,t,n){var o=e.FileUploader,a=n.UploaderStore,i=t.UploaderActions;this.setState({uploaderStore:a,uploaderActions:i}),r.UPLOADER_NEW_TYPESCRIPT?this.setState({fileUploaderNew:o}):this.setState({fileUploaderCoffee:o}),this.props.needToSetStoreValues&&(void 0!==this.user&&i.setUser({user:this.user}),i.setPath({path:this.path}))},l.prototype.componentWillUnmount=function(){i=null},l.loadCoreComponent=function(){i&&(i.state.fileUploaderCoffee||i.state.fileUploaderNew)||(e.defined("modules/clean/react/file_uploader/uploader"),l.requireFileUploader({}))},l.isCoreComponentDefined=function(){return!!i&&!(!i.state.fileUploaderCoffee&&!i.state.fileUploaderNew)},l.setPathAndPermissions=function(e){i&&i.state.uploaderActions&&i.state.uploaderActions.setPath(e)},l.setPath=function(e){i&&(i.state.uploaderActions?i.state.uploaderActions.setPath({path:e}):(e||(e="/"),i.path=e))},l.setUser=function(e){i&&(i.state.uploaderActions?i.state.uploaderActions.setUser({user:e}):i.user=e?e:void 0)},l.showModal=function(e){i&&(i.refs.fileUploader?e&&"regular"!==e?"out-of-quota"===e?i.refs.fileUploader.showOOQModal():"team-onboarding"===e&&i.refs.fileUploader.showModalWithTeamOnboarding():i.refs.fileUploader.showModal():(e=e||"regular",l.requireFileUploader({modalType:e})))},l.setBrowseButton=function(e){i&&(i.refs.fileUploader?i.refs.fileUploader.setBrowseButton(e):l.requireFileUploader({enableBrowseButton:e}))},l.isDraggingFilesHelper=function(e){if(!i)return!1;if(!i.state.uploaderStore)return!1;var t=i.state.uploaderStore;return!!t.numDraggingFiles()&&(e?t.isInternalTransfer():!t.isInternalTransfer())},l.isDraggingInternalFiles=function(){return l.isDraggingFilesHelper(!0)},l.isDraggingExternalFiles=function(){return l.isDraggingFilesHelper(!1)},l.isUploadModalOpen=function(){return!!i&&(!!i.state.uploaderStore&&i.state.uploaderStore.isUploadModalOpen())},l.prototype.render=function(){if(!this.state.fileUploaderCoffee&&!this.state.fileUploaderNew)return o.createElement("div",null);var e=this.props,t=e.onAllFileUploadsComplete,n=e.sendNS,a=e.onFileUploadComplete,i=e.onModalDismissed,l=e.clickOutToClose,s=e.dragAndDropEnabled,u=e.shouldShowDestinationLink,c=e.expSubgrowthProNearquotaUploadModal;if(r.UPLOADER_NEW_TYPESCRIPT){var d=this.state.fileUploaderNew;return o.createElement(d,{ref:"fileUploader",key:1,sendNS:n,onFileUploadComplete:a,onAllFileUploadsComplete:t,onModalDismissed:i,clickOutToClose:l,dragAndDropEnabled:s,shouldShowDestinationLink:u,expSubgrowthProNearquotaUploadModal:c})}var d=this.state.fileUploaderCoffee;return o.createElement(d,{ref:"fileUploader",key:1,sendNS:n,onFileUploadComplete:a,onAllFileUploadsComplete:t,onModalDismissed:i,clickOutToClose:l,dragAndDropEnabled:s,shouldShowDestinationLink:u,expSubgrowthProNearquotaUploadModal:c})},l})(o.Component);t.FileUploaderController=l}),define("modules/clean/react/file_uploader/upload_button",["require","exports","tslib","external/spectrum/button","external/spectrum/tertiary_link","modules/clean/web_timing_logger","external/react","modules/clean/react/file_uploader/file_uploader"],function(e,t,n,o,r,a,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){a.waitForTTI().then(function(){return l.FileUploaderController.setBrowseButton(!0)})},t.prototype.componentWillUnmount=function(){a.waitForTTI().then(function(){return l.FileUploaderController.setBrowseButton(!1)})},t.prototype.renderPrimaryButton=function(){return i.createElement(o.Button,{className:this.props.className,disabled:this.props.disabled,onClick:this.props.handleClick,variant:"primary"},this.props.children)},t.prototype.renderTertiaryLink=function(){return i.createElement(r.TertiaryLink,{icon:this.props.iconName,onClick:this.props.handleClick,disabled:this.props.disabled,className:this.props.className},this.props.children)},t.prototype.renderCMButton=function(){return i.createElement("button",{className:this.props.className,disabled:this.props.disabled,onClick:this.props.handleClick},this.props.children)},t.prototype.render=function(){return"primary"===this.props.variant?this.renderPrimaryButton():"CM"===this.props.variant?this.renderCMButton():this.renderTertiaryLink()},t})(i.PureComponent);t.UploadButton=s}),define("modules/clean/sharing/wizard/async_wizard_modals",["require","exports"],function(e,t){"use strict";function n(t){e(["modules/clean/sharing/wizard/wizard_modals"],t)}function o(e,t,o,r){n(function(n){n.shareExistingFolder(e,t,o,r)})}function r(e,t){n(function(n){var o=n.showShareAFolderWizardModal(e);t&&t(o)})}Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShareExistingFolder=o,t.asyncShowShareAFolderWizardModal=r});
//# sourceMappingURL=pkg-browse-core.min.js-vflhGtwaq.map